<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Simple JS</title>
    <link rel="stylesheet" href="style.css">
    <script
    src="http://code.jquery.com/jquery-3.4.0.min.js"
    integrity="sha256-BJeo0qm959uMBGb65z40ejJYGSgR7REI4+CW1fNKwOg="
    crossorigin="anonymous"></script>
</head>
<body>

<div class="calc">
    <button class="btn btn_c" data-id="clear">C</button>
    <div id="calc_result"></div>
    <div class="calc_btn">
        <div class="row">
            <button class="btn btn_grey" data-id = "7">7</button>
            <button class="btn btn_grey" data-id = "8">8</button>
            <button class="btn btn_grey" data-id = "9">9</button>
            <button class="btn btn_op" data-id = "plus">+</button>
        </div>
        <div class="row">
            <button class="btn btn_grey" data-id = "4">4</button>
            <button class="btn btn_grey" data-id = "5">5</button>
            <button class="btn btn_grey" data-id = "6">6</button>
            <button class="btn btn_op" data-id = "minus">-</button>
        </div>
        <div class="row">
            <button class="btn btn_grey" data-id = "1">1</button>
            <button class="btn btn_grey" data-id = "2">2</button>
            <button class="btn btn_grey" data-id = "3">3</button>
            <button class="btn btn_op" data-id = "divis">/</button>
        </div>
        <div class="row">
            <button class="btn btn_grey" data-id = "0">0</button>
            <button class="btn btn_grey" data-id = ".">.</button>
            <button class="btn btn_grey" data-id = "equal">=</button>
            <button class="btn btn_op" data-id = "multi">x</button>
        </div>

    </div>

</div>

<script type="text/javascript">
    var firstNum = '';
    var secondNum = '';
    var thirdNum = '';
    var check = false;
    var mainOperator = false;
    var operator;
    var preMainOperator;

    $('.btn').click(function () {

        var btn = $(this).data('id');

       if (typeof(btn)=="number" || btn === ".") {
           if (check==false) {
               firstNum += '' + btn;
               document.getElementById('calc_result').innerText += btn;
           } else {
               if (!mainOperator) {
                   secondNum += '' + btn;
                   document.getElementById('calc_result').innerText += btn;
               } else {
                   thirdNum += '' + btn;
                   document.getElementById('calc_result').innerText += btn;
               }
           }
       } else {

           if (parseFloat(secondNum) === 0)
           {
               secondNum = "";
               check = false;
               alert("Division by zero is undefined");
           }

           switch (btn) {
               case 'plus':
                   document.getElementById('calc_result').innerText+='+';

                   if (check == true && secondNum!="") {
                       if (operator !== "") {
                           if (!mainOperator) {
                               firstNum = calculate(operator, firstNum, secondNum);
                               secondNum = "";
                               operator = 'plus';
                               preMainOperator = operator;
                           } else {
                               secondNum = calculate(operator, secondNum, thirdNum);
                               thirdNum = '';
                               firstNum = calculate(preMainOperator, firstNum, secondNum);
                               secondNum = '';
                               mainOperator = false;
                               operator = 'plus';
                               preMainOperator = operator;
                           }
                       }
                       else {
                           operator = 'plus';
                           preMainOperator = operator;
                       }
                   } else {
                       check = true;
                       operator = 'plus';
                       preMainOperator = operator;
                   }
                   break;
               case 'minus':
                   document.getElementById('calc_result').innerText+='-';

                   if (check == true && secondNum!="") {
                       if (operator !== "") {
                           if (!mainOperator) {
                               firstNum = calculate(operator, firstNum, secondNum);
                               secondNum = "";
                               operator = 'minus';
                               preMainOperator = operator;
                           } else {
                               secondNum = calculate(operator, secondNum, thirdNum);
                               thirdNum = '';
                               firstNum = calculate(preMainOperator, firstNum, secondNum);
                               secondNum = '';
                               mainOperator = false;
                               operator = 'plus';
                               preMainOperator = operator;
                           }
                       } else {
                           operator = 'minus';
                           preMainOperator = operator;
                       }
                   } else {
                       check = true;
                       operator = 'minus';
                       preMainOperator = operator;
                   }
                   break;
               case 'divis':
                   document.getElementById('calc_result').innerText+='/';

                   if (check == true && secondNum!="") {
                       if (operator !== "") {
                           if (!mainOperator) {
                               if (operator == "multi" || operator == "divis") {
                                   firstNum = calculate(operator, firstNum, secondNum);
                                   secondNum = "";
                                   operator = 'divis';
                               } else {
                                   mainOperator = true;
                                   operator = 'divis';
                               }
                           } else {
                               if (operator == "multi" || operator == "divis") {
                                   secondNum = calculate(operator, secondNum, thirdNum);
                                   thirdNum = '';
                                   operator = 'divis';
                               } else {
                                   secondNum = calculate(operator, secondNum, thirdNum);
                                   thirdNum = '';
                                   operator = 'divis';
                                   firstNum = calculate(preMainOperator, firstNum, secondNum);
                                   secondNum = '';
                                   mainOperator = false;
                               }
                           }
                       } else {
                           operator = 'divis';
                       }
                   } else {
                       check = true;
                       operator = 'divis';
                   }
                   break;
               case 'multi':
                   document.getElementById('calc_result').innerText+='*';

                   if (check == true && secondNum!="") {
                       if (operator !== "") {
                           if (!mainOperator) {
                               if (operator == "multi" || operator == "divis") {
                                   firstNum = calculate(operator, firstNum, secondNum);
                                   secondNum = "";
                                   operator = 'multi';
                               } else {
                                   mainOperator = true;
                                   operator = 'multi';
                               }
                           } else {
                               if (operator == "multi" || operator == "divis") {
                                   secondNum = calculate(operator, secondNum, thirdNum);
                                   thirdNum = '';
                                   operator = 'multi';
                               } else {
                                   secondNum = calculate(operator, secondNum, thirdNum);
                                   thirdNum = '';
                                   operator = 'multi';
                                   firstNum = calculate(preMainOperator, firstNum, secondNum);
                                   secondNum = '';
                                   mainOperator = false;
                               }
                           }
                       } else {
                           operator = 'divis';
                       }
                   } else {
                       check = true;
                       operator = 'multi';
                   }
                   break;
               case 'equal':
                   if (check == false || (check == true && secondNum == "")){
                       document.getElementById('calc_result').innerText = firstNum;
                   }
                   else if (firstNum == "" && secondNum!="") {
                       firstNum = secondNum;
                       secondNum = "";
                       document.getElementById('calc_result').innerText = firstNum;
                   }
                   else {
                       switch (operator) {
                           case 'plus':
                               firstNum = calculate(operator, firstNum, secondNum);
                               secondNum = '';
                               operator = '';
                               document.getElementById('calc_result').innerText = firstNum;
                               break;
                           case 'minus':
                               firstNum = calculate(operator, firstNum, secondNum);
                               secondNum = '';
                               operator = '';
                               document.getElementById('calc_result').innerText = firstNum;
                               break;
                           case 'divis':
                               if (!mainOperator) {
                                   firstNum = calculate(operator, firstNum, secondNum);
                                   secondNum = '';
                                   operator = '';
                                   document.getElementById('calc_result').innerText = firstNum;
                               } else {
                                   secondNum = calculate(operator, secondNum, thirdNum);
                                   thirdNum = '';
                                   firstNum = calculate(preMainOperator, firstNum, secondNum);
                                   secondNum = '';
                                   document.getElementById('calc_result').innerText = firstNum;
                                   operator = '';
                               }
                               break;
                           case "multi":
                               if (!mainOperator) {
                                   firstNum = calculate(operator, firstNum, secondNum);
                                   secondNum = '';
                                   operator = '';
                                   document.getElementById('calc_result').innerText = firstNum;
                               } else {
                                   secondNum = calculate(operator, secondNum, thirdNum);
                                   thirdNum = '';
                                   firstNum = calculate(preMainOperator, firstNum, secondNum);
                                   secondNum = '';
                                   document.getElementById('calc_result').innerText = firstNum;
                                   operator = '';
                               }
                               break;
                           case '':
                               document.getElementById('calc_result').innerText = firstNum;
                               break;
                       }
                   }
                   check = false;
                   break;
               case 'clear':
                   document.getElementById('calc_result').innerText = '';
                   firstNum = '';
                   secondNum = '';
                   thirdNum = '';
                   check = false;
                   operator = '';
                   mainOperator = false;
                   break;
           }
       }
    });

    function calculate(operate,firN,secN) {
        switch (operate) {
            case 'plus':
                firN = parseFloat(firN)+parseFloat(secN);
                return firN;
            case 'minus':
                firN = parseFloat(firN)-parseFloat(secN);
                return firN;
            case 'divis':
                firN = parseFloat(firN)/parseFloat(secN);
                return firN;
            case "multi":
                firN = parseFloat(firN)*parseFloat(secN);
                return firN;
        }

    }
</script>

</body>
</html>